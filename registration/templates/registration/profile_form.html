{% extends 'core/base.html' %}
{% load static %}
{% block title %}Perfil{% endblock %}
{% block content %}
<style>
    .errorlist {
        color: red;
    }
</style>
<main role="main">
    <div class="container">
        <div class="row mt-3">
            <div class="col-md-9 mx-auto mb-5">
                <div class="card">
                    <div class="card-header bg-dark text-light">
                        <h3 class="card-title">Perfil</h3>
                    </div>
                    <div class="card-body">
                        {% if messages %}
                        {% for message in messages %}
                        <div class="alert alert-{% if message.tags == 'success' %}success {% elif message.tags == 'error' %}danger {% endif %}"
                            role="alert">
                            {{ message }}
                        </div>

                        {% endfor %}
                        {% endif %}
                        <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
                            <div class="row">
                                <!-- Previa del avatar -->
                                <div class="col-md-2">
                                    <img src="{{request.user.profile.avatar.url}}" class="rounded-circle" width="100px"
                                        height="100px">
                                    {% comment %} <p class="mt-1">¿Borrar? <input type="checkbox" id="avatar-clear"
                                            name="avatar-clear" /></p> {% endcomment %}
                                </div>
                                <!-- Formulario -->
                                <div class="col-md-10">

                                    {{form_profile.avatar.label_tag}}
                                    {{form_profile.avatar}}



                                    <div class="form-group mt-3">
                                        <label for="email">Email: <i class="bi bi-check"
                                                style="color: green; width: 50px;"></i> </label>
                                        <input type="email" class="form-control mb-3" value="{{request.user.email}}"
                                            aria-label="Disabled input example" disabled>
                                    </div>

                                    {% comment %} <p class="mt-3">Para cambiar tu email, <a
                                            href="{% url 'profile_email' %}">clic aquí</a><br>
                                        Si quieres cambiar tu contraseña, <a href="{% url 'password_change' %}">clic
                                            aquí</a>
                                    </p> {% endcomment %}

                                    {{form.as_p}}

                                    <div class="form-group mb-3">
                                        {{form_profile.school.label}}
                                        {{form_profile.school}}
                                    </div>


                                    <!--Cambiar contraseña-->
                                    <div class="form-group">
                                        <a href="{% url 'password_change' %}">Cambiar contraseña</a>
                                    </div>

                                    <input type="submit" class="btn btn-primary btn-block mt-3" value="Actualizar">
                                </div>
                            </div>
                        </form>

                    </div>
                    <div class="card-footer">
                        {% comment %} <a href="{% url 'profile' %}" class="btn btn-secondary">Volver</a>
                        {% endcomment %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}